<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>ЁЯФЧ рж▓рж┐ржВржХ ржорзНржпрж╛ржирзЗржЬрж╛рж░</title>
  <script type="module">
    // Firebase SDK ржЗржоржкрзЛрж░рзНржЯ
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, push, set, onValue, remove } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

    // тЬЕ ржЖржкржирж╛рж░ Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyC17r-Ty3DKLu9Z64WdZwG9xYYerHJRcwI",
      authDomain: "link-management-89e96.firebaseapp.com",
      projectId: "link-management-89e96",
      storageBucket: "link-management-89e96.firebasestorage.app",
      messagingSenderId: "909617203357",
      appId: "1:909617203357:web:8103ba9e46b0e13cc1ac74",
      databaseURL: "https://link-management-89e96-default-rtdb.firebaseio.com"
    };

    // Firebase рж╢рзБрж░рзБ ржХрж░рзБржи
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // ЁЯФ╣ рж▓рж┐ржВржХ ржпрзБржХрзНржд ржХрж░рж╛рж░ ржлрж╛ржВрж╢ржи
    function addLink(link) {
      const linkRef = ref(db, 'links/');
      const newLink = push(linkRef);
      set(newLink, { url: link });
    }

    // ЁЯФ╕ рж▓рж┐ржВржХ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ ржлрж╛ржВрж╢ржи
    function deleteLink(key) {
      remove(ref(db, 'links/' + key));
    }

    // ЁЯФН рж▓рж┐ржВржХ ржжрзЗржЦрж╛ржирзЛрж░ ржлрж╛ржВрж╢ржи
    const listContainer = document.getElementById("linkList");
    const linkRef = ref(db, 'links/');

    onValue(linkRef, (snapshot) => {
      listContainer.innerHTML = "";
      snapshot.forEach(child => {
        const key = child.key;
        const link = child.val().url;
        const li = document.createElement("li");
        li.innerHTML = `<a href="${link}" target="_blank">${link}</a> 
          <button onclick="deleteLink('${key}')">тЭМ</button>`;
        listContainer.appendChild(li);
      });
    });

    // Submit ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржирждрзБржи рж▓рж┐ржВржХ add рж╣ржмрзЗ
    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById("addLinkForm").addEventListener("submit", (e) => {
        e.preventDefault();
        const link = document.getElementById("linkInput").value;
        addLink(link);
        document.getElementById("linkInput").value = "";
      });
    });

    // deleteLink globally accessible
    window.deleteLink = deleteLink;
  </script>
</head>
<body style="font-family: sans-serif; padding: 20px;">
  <h2>ЁЯУМ ржирждрзБржи рж▓рж┐ржВржХ ржпрзБржХрзНржд ржХрж░рзБржи</h2>
  <form id="addLinkForm">
    <input type="text" id="linkInput" placeholder="ржПржЦрж╛ржирзЗ рж▓рж┐ржВржХ ржжрж┐ржи..." required style="padding: 5px; width: 250px;">
    <button type="submit">тЮХ Add</button>
  </form>

  <h3>тЬЕ ржмрж░рзНрждржорж╛ржи рж▓рж┐ржВржХрж╕ржорзВрж╣:</h3>
  <ul id="linkList" style="list-style: none; padding-left: 0;"></ul>
</body>
  </html>
